 to// Basic stepper motor control for CNC Shield V3
#include <AccelStepper.h>
#include <MultiStepper.h>

// Define stepper motor connections and motor interface type
#define motorInterfaceType 1
#define dirPinX 5
#define stepPinX 2
#define motorInterfaceType 1
#define dirPinY 6
#define stepPinY 3
#define enablePin 8

// Motor Constants 
const int totalSteps = 1600;
const int motorSteps = 200;
const int microStepCount = 8;
const int stepsToAngle = 1/360;


// Create two instances of the AccelStepper class
AccelStepper stepperX(AccelStepper::DRIVER, stepPinX, dirPinX);
AccelStepper stepperY(AccelStepper::DRIVER, stepPinY, dirPinY);
//AccelStepper stepperZ(AccelStepper::DRIVER, stepPinX, dirPinX);
//AccelStepper stepperA(AccelStepper::DRIVER, stepPinY, dirPinY);

// Moves to angle between 0 and 360
int angleToSteps(double angle) {
  int convertedSteps = totalSteps * angle * stepsToAngle;
  return convertedSteps;
}

void setup() {
  //Serial.begin(57600);
  
  // Disables stepper motors lock pin
  pinMode(enablePin, OUTPUT);
  digitalWrite(enablePin, LOW);
  
  // Set the maximum speed and acceleration:
  stepperX.setMaxSpeed(100000);
  stepperX.setAcceleration(10000);
  stepperY.setMaxSpeed(100000);
  stepperY.setAcceleration(10000);
//  stepperZ.setMaxSpeed(100000);
//  stepperZ.setAcceleration(10000);
//  stepperA.setMaxSpeed(100000);
//  stepperA.setAcceleration(10000);
}

void loop() {
//  Serial.print("X_POSITION: ");
//  Serial.println(stepperX.currentPosition());
    
  // Set the target position for each axis
  stepperX.moveTo(totalSteps);
  stepperY.moveTo(totalSteps);
//  stepperZ.moveTo(totalSteps);
//  stepperA.moveTo(totalSteps);
  
  // Run the motors to move to the set positions
  stepperX.run();
//  stepperY.run();
//  stepperZ.run();
//  stepperA.run();

}
